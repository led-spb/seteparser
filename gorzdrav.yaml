### parser
- name: gorzdrav
  enabled: false
  parser: &parser
    type:  simple
    url:   "https://gorzdrav.spb.ru/api/appointment_list/"
    link:
    title:
    data: &data
      doctor_form-doctor_id:
      doctor_form-clinic_id:
      doctor_form-patient_id:
      doctor_form-history_id:
      doctor_form-appointment_type:
    headers:
      Referer: https://gorzdrav.spb.ru/signup/free/
      X-Requested-With: XMLHttpRequest
      Origin: https://gorzdrav.spb.ru
      DNT: "1"
    eval: |
      import urllib
      import logging
      logging.debug(request.text)

      link = self.params['headers']['Referer'] + '#' + \
             urllib.quote(
               '[{"district":%d},{"clinic":%d},{"speciality":%d},{"doctor":%d}]' % ( self.params['data']['doctor_form-district'], self.params['data']['doctor_form-clinic_id'], self.params['data']['doctor_form-speciality'], self.params['data']['doctor_form-doctor_id'] ),
               '"'
             )
      logging.debug(link)

      data = request.json()
      if data['success']:
         for dt in data['response'].keys():
             self.add( id=dt, title=self.param('title'), body=dt, src=link, lifetime=4*24*60*60 )
### end parser


- name: gorzdrav_baukova
  output: !include console.yaml
  enabled: true
  parser: 
    <<: *parser
    title: "Байкова ортопед"
    data:
      <<: *data
      doctor_form-district: 4
      doctor_form-speciality: 92134170
      doctor_form-doctor_id: 90
      doctor_form-clinic_id: 297


- name: gorzdrav_gzdatckay
  output: !include console.yaml
  enabled: true
  parser:
  parser: 
    <<: *parser
    title: "Гжатская ортопед"
    data:
      <<: *data
      doctor_form-district: 4
      doctor_form-speciality: 92134170
      doctor_form-doctor_id: 168
      doctor_form-clinic_id: 299
